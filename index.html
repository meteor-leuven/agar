<!doctype html>
<html lang='en'>
<head>
<meta charset='utf-8'>
<title>Agar:-step-by-step</title><link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css'><style type='text/css'>html, body {overflow-x: initial !important;}@include-when-export url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/**
 * css forked from https://github.com/GitbookIO/gitbook 
 * www.gitbook.com
 * Apache License
 * https://github.com/GitbookIO/gitbook/blob/master/LICENSE
 **/

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: normal;
    src: local('Open Sans Regular'),url('./github/400.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: normal;
    src: local('Open Sans Italic'),url('./github/400i.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: bold;
    src: local('Open Sans Bold'),url('./github/700.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: bold;
    src: local('Open Sans Bold Italic'),url('./github/700i.woff') format('woff')
}

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
	-webkit-font-smoothing: antialiased;
}

#write{
    max-width: 800px;
  	margin: 0 auto;
  	padding: 20px 30px 40px 30px;
	padding-top: 20px;
}

#write:after{
	height:80px;
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}
body > *:last-child {
    margin-bottom: 0 !important;
}
a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    -webkit-font-smoothing: antialiased;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    /*background: url("../../images/modules/styleguide/para.png") no-repeat 10px center;*/
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 4px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
    border-bottom: 1px solid #ddd;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}
body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}
a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}
h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}
li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dddddd;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
}
table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n) {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-gutters {
    border-right: 1px solid #ddd;
}

pre.md-fences,
.md-fences,
code,
tt {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}
pre.md-fences,
.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding: 0.2em 1em;
    padding-top: 8px;
    padding-bottom: 6px;
}
.task-list{
	padding-left: 0;
}

.task-list-item {
	padding-left:32px;
}

.task-list-item input {
  top: 3px;
  left: 8px;
}

@media screen and (min-width: 914px) {
    /*body {
        width: 854px;
        margin: 0 auto;
    }*/
}
@media print {
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag{
	color: inherit;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}
@include-when-export url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/**
 * css forked from https://github.com/GitbookIO/gitbook 
 * www.gitbook.com
 * Apache License
 * https://github.com/GitbookIO/gitbook/blob/master/LICENSE
 **/

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: normal;
    src: local('Open Sans Regular'),url('./github/400.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: normal;
    src: local('Open Sans Italic'),url('./github/400i.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: bold;
    src: local('Open Sans Bold'),url('./github/700.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: bold;
    src: local('Open Sans Bold Italic'),url('./github/700i.woff') format('woff')
}

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
	-webkit-font-smoothing: antialiased;
}

#write{
    max-width: 800px;
  	margin: 0 auto;
  	padding: 20px 30px 40px 30px;
	padding-top: 20px;
}

#write:after{
	height:80px;
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}
body > *:last-child {
    margin-bottom: 0 !important;
}
a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    -webkit-font-smoothing: antialiased;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    /*background: url("../../images/modules/styleguide/para.png") no-repeat 10px center;*/
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 4px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
    border-bottom: 1px solid #ddd;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}
body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}
a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}
h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}
li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dddddd;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
}
table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n) {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-gutters {
    border-right: 1px solid #ddd;
}

pre.md-fences,
.md-fences,
code,
tt {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}
pre.md-fences,
.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding: 0.2em 1em;
    padding-top: 8px;
    padding-bottom: 6px;
}
.task-list{
	padding-left: 0;
}

.task-list-item {
	padding-left:32px;
}

.task-list-item input {
  top: 3px;
  left: 8px;
}

@media screen and (min-width: 914px) {
    /*body {
        width: 854px;
        margin: 0 auto;
    }*/
}
@media print {
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag{
	color: inherit;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}
.CodeMirror { height: auto; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; }
.CodeMirror-lines { padding: 4px 0px; }
.CodeMirror pre { }
.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { background-color: white; }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background-color: rgb(247, 247, 247); white-space: nowrap; }
.CodeMirror-linenumbers { }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.CodeMirror div.CodeMirror-cursor { border-left-width: 1px; border-left-style: solid; border-left-color: black; z-index: 3; }
.CodeMirror div.CodeMirror-secondarycursor { border-left-width: 1px; border-left-style: solid; border-left-color: silver; }
.CodeMirror.cm-keymap-fat-cursor div.CodeMirror-cursor { width: auto; border: 0px; background-color: rgb(119, 238, 119); z-index: 1; background-position: initial initial; background-repeat: initial initial; }
.CodeMirror div.CodeMirror-cursor.CodeMirror-overwrite { }
.cm-tab { display: inline-block; }
.cm-s-typora-default .cm-header, .cm-s-typora-default .cm-property { color: rgb(217, 79, 138); }
.cm-s-typora-default pre.cm-header1:not(.cm-atom) :not(.cm-overlay) { font-size: 2rem; line-height: 2rem; }
.cm-s-typora-default pre.cm-header2:not(.cm-atom) :not(.cm-overlay) { font-size: 1.4rem; line-height: 1.4rem; }
.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number { color: rgb(149, 132, 134); }
.cm-s-typora-default .cm-table-row, .cm-s-typora-default .cm-block-start { font-family: monospace; }
.cm-s-typora-default .cm-comment { color: rgb(74, 90, 159); font-family: monospace; }
.cm-s-typora-default .cm-tag { color: rgb(169, 68, 66); }
.cm-s-typora-default .cm-string { color: rgb(126, 134, 169); }
.cm-s-typora-default .cm-link { color: rgb(196, 122, 15); text-decoration: underline; }
.cm-s-typora-default .cm-variable-2, .cm-s-typora-default .cm-variable-1 { color: inherit; }
.cm-s-typora-default .cm-overlay { font-size: 1rem; font-family: monospace; }
.CodeMirror.cm-s-typora-default div.CodeMirror-cursor { border-left-width: 3px; border-left-style: solid; border-left-color: rgb(228, 98, 154); }
.cm-s-typora-default .CodeMirror-activeline-background { left: -60px; right: -30px; background-color: rgba(204, 204, 204, 0.2); background-position: initial initial; background-repeat: initial initial; }
.cm-s-typora-default .CodeMirror-gutters { border-right-style: none; background-color: inherit; }
.cm-s-typora-default .cm-trailing-space-new-line::after, .cm-startspace::after, .cm-starttab .cm-tab::after { content: '•'; position: absolute; left: 0px; opacity: 0; font-family: LetterGothicStd, monospace; }
.os-windows .cm-startspace::after, .os-windows .cm-starttab .cm-tab::after { left: -0.1em; }
.cm-starttab .cm-tab::after { content: ' '; }
.cm-startspace, .cm-tab, .cm-starttab, .cm-trailing-space-a, .cm-trailing-space-b, .cm-trailing-space-new-line { font-family: monospace; position: relative; }
.cm-s-typora-default .cm-trailing-space-new-line::after { content: '↓'; opacity: 0.3; }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: black; }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-property { color: black; }
.cm-s-inner .cm-operator { color: black; }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: blue; }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: bold; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: rgb(255, 0, 0); }
.cm-invalidchar { color: rgb(255, 0, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.CodeMirror-activeline-background { background-color: rgb(232, 242, 255); background-position: initial initial; background-repeat: initial initial; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; padding-right: 30px; height: 100%; outline: none; position: relative; box-sizing: content-box; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow-x: hidden; overflow-y: scroll; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; border-width: 0px; background-color: transparent; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; background-position: initial initial; background-repeat: initial initial; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: -webkit-fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-style: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-widget { }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-style: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.CodeMirror-selected { background-color: rgb(217, 217, 217); background-position: initial initial; background-repeat: initial initial; }
.CodeMirror-focused .CodeMirror-selected { background-color: rgb(215, 212, 240); background-position: initial initial; background-repeat: initial initial; }
.cm-searching { background-color: rgba(255, 255, 0, 0.4); background-position: initial initial; background-repeat: initial initial; }
.CodeMirror span { }
@media print { 
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


@include-when-export url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/**
 * css forked from https://github.com/GitbookIO/gitbook 
 * www.gitbook.com
 * Apache License
 * https://github.com/GitbookIO/gitbook/blob/master/LICENSE
 **/

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: normal;
    src: local('Open Sans Regular'),url('./github/400.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: normal;
    src: local('Open Sans Italic'),url('./github/400i.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: bold;
    src: local('Open Sans Bold'),url('./github/700.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: bold;
    src: local('Open Sans Bold Italic'),url('./github/700i.woff') format('woff')
}

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
	-webkit-font-smoothing: antialiased;
}

#write{
    max-width: 800px;
  	margin: 0 auto;
  	padding: 20px 30px 40px 30px;
	padding-top: 20px;
}

#write:after{
	height:80px;
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}
body > *:last-child {
    margin-bottom: 0 !important;
}
a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    -webkit-font-smoothing: antialiased;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    /*background: url("../../images/modules/styleguide/para.png") no-repeat 10px center;*/
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 4px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
    border-bottom: 1px solid #ddd;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}
body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}
a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}
h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}
li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dddddd;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
}
table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n) {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-gutters {
    border-right: 1px solid #ddd;
}

pre.md-fences,
.md-fences,
code,
tt {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}
pre.md-fences,
.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding: 0.2em 1em;
    padding-top: 8px;
    padding-bottom: 6px;
}
.task-list{
	padding-left: 0;
}

.task-list-item {
	padding-left:32px;
}

.task-list-item input {
  top: 3px;
  left: 8px;
}

@media screen and (min-width: 914px) {
    /*body {
        width: 854px;
        margin: 0 auto;
    }*/
}
@media print {
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag{
	color: inherit;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}
html { font-size: 14px; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1rem; line-height: 1.42857143; color: rgb(51, 51, 51); background-color: rgb(255, 255, 255); overflow-x: hidden; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { background-color: rgb(181, 214, 252); text-shadow: none; background-position: initial initial; background-repeat: initial initial; }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export #write { margin: 0px auto; }
#write > p:first-child, #write > ul:first-child, #write > ol:first-child, #write > pre:first-child, #write > blockquote:first-child, #write > div:first-child, #write > table:first-child { margin-top: 30px; }
img { max-width: 100%; }
input, button, select, textarea { color: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; line-height: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
::before, ::after, * { box-sizing: border-box; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write div, #write pre { width: inherit; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6 { position: relative; }
h1 { font-size: 2rem; }
p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; }
.mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0rem; -webkit-margin-after: 0rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: bold; font-style: italic; }
a { cursor: pointer; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; margin: 4px 0px 0px; }
tr { page-break-inside: avoid; page-break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; page-break-inside: auto; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right-width: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
pre { white-space: pre-wrap; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences, pre.md-fences { font-size: 0.9rem; display: block; page-break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: inherit; position: relative !important; background-position: inherit inherit; background-repeat: inherit inherit; }
.md-fences .CodeMirror.CodeMirror-wrap { top: -1.6em; margin-bottom: -1.6em; }
.md-fences.mock-cm { white-space: pre-wrap; }
.show-fences-line-number pre.md-fences { padding-left: 0px; }
.show-fences-line-number pre.md-fences.mock-cm { padding-left: 40px; }
.footnotes { color: rgb(136, 136, 136); font-size: 0.9rem; padding-top: 1em; padding-bottom: 1em; }
.footnotes + .footnotes { margin-top: -1em; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background-color: transparent; text-decoration: none; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 1rem; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: normal; text-align: left; box-sizing: content-box; direction: ltr; background-position: initial initial; background-repeat: initial initial; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li p, li .mathjax-block { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; }
@media print { 
  html, body { height: 100%; }
  .typora-export * { -webkit-print-color-adjust: exact; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
#write pre.md-meta-block { font-size: 0.8rem; min-height: 2.86rem; white-space: pre-wrap; background-color: rgb(204, 204, 204); display: block; background-position: initial initial; background-repeat: initial initial; }
p > .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.mathjax-block { white-space: pre; overflow: hidden; width: 100%; }
p + .mathjax-block { margin-top: -1.143rem; }
.mathjax-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: none; box-shadow: none; }
.task-list { list-style-type: none; }
.task-list-item { position: relative; padding-left: 1em; }
.task-list-item input { position: absolute; top: 0px; left: 0px; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc::after, .md-toc-content::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: bold; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
.md-toc-h6 { margin-left: 12em; }
@media screen and (max-width: 48em) { 
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 8em; }
  .md-toc-h6 { margin-left: 9.5em; }
}
a.md-toc-inner { color: inherit; font-size: inherit; font-style: inherit; font-weight: inherit; text-decoration: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: '.'; }
.md-tag { opacity: 0.5; }
code { text-align: left; }
h1 .md-tag, h2 .md-tag, h3 .md-tag, h4 .md-tag, h5 .md-tag, h6 .md-tag { font-weight: initial; opacity: 0.35; }
a.md-header-anchor.md-print-anchor { border: none !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: none !important; background-color: transparent !important; text-shadow: initial !important; background-position: initial initial !important; background-repeat: initial initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0em; position: relative; text-indent: 0px; max-width: none; max-height: none; min-width: 0px; min-height: 0px; width: 100%; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: monospace; }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { -webkit-transition: none; transition: none; }


@include-when-export url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/**
 * css forked from https://github.com/GitbookIO/gitbook 
 * www.gitbook.com
 * Apache License
 * https://github.com/GitbookIO/gitbook/blob/master/LICENSE
 **/

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: normal;
    src: local('Open Sans Regular'),url('./github/400.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: normal;
    src: local('Open Sans Italic'),url('./github/400i.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: bold;
    src: local('Open Sans Bold'),url('./github/700.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: bold;
    src: local('Open Sans Bold Italic'),url('./github/700i.woff') format('woff')
}

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
	-webkit-font-smoothing: antialiased;
}

#write{
    max-width: 800px;
  	margin: 0 auto;
  	padding: 20px 30px 40px 30px;
	padding-top: 20px;
}

#write:after{
	height:80px;
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}
body > *:last-child {
    margin-bottom: 0 !important;
}
a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    -webkit-font-smoothing: antialiased;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    /*background: url("../../images/modules/styleguide/para.png") no-repeat 10px center;*/
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 4px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
    border-bottom: 1px solid #ddd;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}
body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}
a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}
h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}
li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dddddd;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
}
table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n) {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-gutters {
    border-right: 1px solid #ddd;
}

pre.md-fences,
.md-fences,
code,
tt {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}
pre.md-fences,
.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding: 0.2em 1em;
    padding-top: 8px;
    padding-bottom: 6px;
}
.task-list{
	padding-left: 0;
}

.task-list-item {
	padding-left:32px;
}

.task-list-item input {
  top: 3px;
  left: 8px;
}

@media screen and (min-width: 914px) {
    /*body {
        width: 854px;
        margin: 0 auto;
    }*/
}
@media print {
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag{
	color: inherit;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}
@include-when-export url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/**
 * css forked from https://github.com/GitbookIO/gitbook 
 * www.gitbook.com
 * Apache License
 * https://github.com/GitbookIO/gitbook/blob/master/LICENSE
 **/

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: normal;
    src: local('Open Sans Regular'),url('./github/400.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: normal;
    src: local('Open Sans Italic'),url('./github/400i.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: bold;
    src: local('Open Sans Bold'),url('./github/700.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: bold;
    src: local('Open Sans Bold Italic'),url('./github/700i.woff') format('woff')
}

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
	-webkit-font-smoothing: antialiased;
}

#write{
    max-width: 800px;
  	margin: 0 auto;
  	padding: 20px 30px 40px 30px;
	padding-top: 20px;
}

#write:after{
	height:80px;
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}
body > *:last-child {
    margin-bottom: 0 !important;
}
a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    -webkit-font-smoothing: antialiased;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    /*background: url("../../images/modules/styleguide/para.png") no-repeat 10px center;*/
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 4px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
    border-bottom: 1px solid #ddd;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}
body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}
a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}
h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}
li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dddddd;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
}
table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n) {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-gutters {
    border-right: 1px solid #ddd;
}

pre.md-fences,
.md-fences,
code,
tt {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}
pre.md-fences,
.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding: 0.2em 1em;
    padding-top: 8px;
    padding-bottom: 6px;
}
.task-list{
	padding-left: 0;
}

.task-list-item {
	padding-left:32px;
}

.task-list-item input {
  top: 3px;
  left: 8px;
}

@media screen and (min-width: 914px) {
    /*body {
        width: 854px;
        margin: 0 auto;
    }*/
}
@media print {
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag{
	color: inherit;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}
@include-when-export url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/**
 * css forked from https://github.com/GitbookIO/gitbook 
 * www.gitbook.com
 * Apache License
 * https://github.com/GitbookIO/gitbook/blob/master/LICENSE
 **/

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: normal;
    src: local('Open Sans Regular'),url('./github/400.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: normal;
    src: local('Open Sans Italic'),url('./github/400i.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: bold;
    src: local('Open Sans Bold'),url('./github/700.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: bold;
    src: local('Open Sans Bold Italic'),url('./github/700i.woff') format('woff')
}

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
	-webkit-font-smoothing: antialiased;
}

#write{
    max-width: 800px;
  	margin: 0 auto;
  	padding: 20px 30px 40px 30px;
	padding-top: 20px;
}

#write:after{
	height:80px;
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}
body > *:last-child {
    margin-bottom: 0 !important;
}
a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    -webkit-font-smoothing: antialiased;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    /*background: url("../../images/modules/styleguide/para.png") no-repeat 10px center;*/
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 4px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
    border-bottom: 1px solid #ddd;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}
body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}
a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}
h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}
li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dddddd;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
}
table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n) {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-gutters {
    border-right: 1px solid #ddd;
}

pre.md-fences,
.md-fences,
code,
tt {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}
pre.md-fences,
.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding: 0.2em 1em;
    padding-top: 8px;
    padding-bottom: 6px;
}
.task-list{
	padding-left: 0;
}

.task-list-item {
	padding-left:32px;
}

.task-list-item input {
  top: 3px;
  left: 8px;
}

@media screen and (min-width: 914px) {
    /*body {
        width: 854px;
        margin: 0 auto;
    }*/
}
@media print {
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag{
	color: inherit;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}
@include-when-export url(http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/**
 * css forked from https://github.com/GitbookIO/gitbook 
 * www.gitbook.com
 * Apache License
 * https://github.com/GitbookIO/gitbook/blob/master/LICENSE
 **/

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: normal;
    src: local('Open Sans Regular'),url('./github/400.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: normal;
    src: local('Open Sans Italic'),url('./github/400i.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: bold;
    src: local('Open Sans Bold'),url('./github/700.woff') format('woff')
}

@font-face {
    font-family: 'Open Sans';
    font-style: italic;
    font-weight: bold;
    src: local('Open Sans Bold Italic'),url('./github/700i.woff') format('woff')
}

html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans","Helvetica Neue",Helvetica,Arial,sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
	-webkit-font-smoothing: antialiased;
}

#write{
    max-width: 800px;
  	margin: 0 auto;
  	padding: 20px 30px 40px 30px;
	padding-top: 20px;
}

#write:after{
	height:80px;
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}
body > *:last-child {
    margin-bottom: 0 !important;
}
a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    -webkit-font-smoothing: antialiased;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    /*background: url("../../images/modules/styleguide/para.png") no-repeat 10px center;*/
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    padding-bottom: .3em;
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
   padding-bottom: .3em;
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}
h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 4px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
    border-bottom: 1px solid #ddd;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}
body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}
body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}
a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}
h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}
li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dddddd;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
}
table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n) {
    background-color: #f8f8f8;
}
table tr th {
    font-weight: bold;
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr td {
    border: 1px solid #cccccc;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}
table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}
table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

.CodeMirror-gutters {
    border-right: 1px solid #ddd;
}

pre.md-fences,
.md-fences,
code,
tt {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}
pre.md-fences,
.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding: 0.2em 1em;
    padding-top: 8px;
    padding-bottom: 6px;
}
.task-list{
	padding-left: 0;
}

.task-list-item {
	padding-left:32px;
}

.task-list-item input {
  top: 3px;
  left: 8px;
}

@media screen and (min-width: 914px) {
    /*body {
        width: 854px;
        margin: 0 auto;
    }*/
}
@media print {
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
    border-radius: 3px;
    font-family: Consolas, "Liberation Mono", Courier, monospace;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag{
	color: inherit;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}
</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-mac'><h2><a name='header-c1' class='md-header-anchor '></a>Step 1: Make a meteor app</h2><h3><a name='header-c6' class='md-header-anchor '></a>Install meteor</h3><p>Follow the steps at: <a href='https://www.meteor.com/install'>meteor.com/install</a></p><p>On Windows you might be prompted to create a Meteor account: this is not mandatory, you can skip that step.</p><p>If you already had Meteor installed, make sure your installation is up to date:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">meteor update</span></pre></div></div></div></div></div></div></div></pre><h3><a name='header-c14' class='md-header-anchor '></a>Create a Meteor app</h3><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">meteor create agar <span class="cm-comment"># creates a meteor application in the directory ./agar/</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">cd</span> agar <span class="cm-comment"># changes directory to agar</span></span></pre><pre class=""><span style="padding-right: 0.1px;">meteor <span class="cm-comment">#starts the meteor application residing in the current (agar) directory</span></span></pre></div></div></div></div></div></div></div></pre><p>If Windows Firewall blocked something (e.g. <em>Evented I/O for V8 JavaScript</em>) you can safely click <em>allow access</em> for both public and private networks.</p><h3><a name='header-c18' class='md-header-anchor '></a>Try it out</h3><p>Surf to <a href='http://localhost:3000'>http://localhost:3000</a> and admire your new meteor application.</p><h3><a name='header-c21' class='md-header-anchor '></a>IDE</h3><p>To make your life easier you should use an IDE (integrated development environment) or a capable code editor. Although I intensely hate Java applications, <a href='https://www.jetbrains.com/webstorm/'>WebStorm</a> <em>is</em> the handiest one available right now, with support for Meteor out of the box. Alternatively, you can also use Sublime Text or Atom, but those require some additional set-up. Have a look at <a href='https://www.meteor.com/tools'>the Meteor website</a> for some suggestions and links to the useful Meteor plugins.</p><p>Open the agar project directory in your editor and play around a bit. Don&#39;t be afraid to break things, we will not use the default sample files, in fact after you are done it&#39;s time to clean up the project.</p><h3><a name='header-c26' class='md-header-anchor '></a>Clean things up</h3><p>Meteor added some sample files to get you started. Your project should look like this:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;">├── client</span></pre><pre class=""><span style="padding-right: 0.1px;">│&nbsp;&nbsp; ├── main.css</span></pre><pre class=""><span style="padding-right: 0.1px;">│&nbsp;&nbsp; ├── main.html</span></pre><pre class=""><span style="padding-right: 0.1px;">│&nbsp;&nbsp; └── main.js</span></pre><pre class=""><span style="padding-right: 0.1px;">├── package.json</span></pre><pre class=""><span style="padding-right: 0.1px;">└── server</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  └── main.js</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-number">2</span> directories, <span class="cm-number">5</span> files</span></pre></div></div></div></div></div></div></div></pre><p>If you don&#39;t see the <code>client</code> and <code>server</code> folder you probably have an outdated version of Meteor installed. In that case take a look at step 1, update Meteor and recreate the agar project.</p><p>Delete all the <code>html</code>, <code>css</code>, <code>js</code> and <code>json</code> files. That leaves you with a nice, fresh, empty project:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">├── client</span></pre><pre class=""><span style="padding-right: 0.1px;">└── server</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-number">2</span> directories, <span class="cm-number">0</span> files</span></pre></div></div></div></div></div></div></div></pre><p>Note: on Windows you will see files and folders starting with a dot, those are hidden on Mac and Linux and <strong>should not be deleted</strong>.</p><h2><a name='header-c37' class='md-header-anchor '></a>Step 2: Create some graphics</h2><h3><a name='header-c38' class='md-header-anchor '></a>2.1: Create vector graphics</h3><p>Okay, it&#39;s time to start drawing circles in your browser!</p><p>Add an empty <code>canvas.html</code> file inside the <code>client</code> directory. You can use the command line to quickly do this. The file should automatically appear in your editor.</p><p><em>Mac / Linux:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">touch</span> client/canvas.html <span class="cm-comment">#creates an empty file inside the client directory</span></span></pre></div></div></div></div></div></div></div></pre><p><em>Windows:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right" style="display: none;"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap  "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 256.03125px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">type nul &gt;&gt; client/canvas.html</span></pre></div></div></div></div></div></div></div></pre><p>Add a <code>&lt;head&gt;</code> and a <code>&lt;body&gt;</code> element to your HTML file. Inside the <code>&lt;body&gt;</code> you will add an SVG (Scalable Vector Graphics) element. SVG elements have their own viewports and coordinate systems.</p><p>We want to render the circle of the player in the center of the screen. The coordinate system looks like this, however:</p><p><img src='https://developer.mozilla.org/@api/deki/files/78/=Canvas_default_grid.png' alt='Grid' /></p><p>Note how the top-left corner has the coordinate (0,0).</p><p>We want the circle you control to appear in the middle of the screen. It would make sense to have (0,0) as our center coordinate. We all know you <em>are</em> the center of the universe, aren&#39;t you? Therefore, when creating the <code>&lt;svg&gt;</code> element you should make sure the <code>viewBox</code> top-left corner is set at (-200, -200) and has a height and width of 400. (these are so-called <em><a href='https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Positions'>user units</a></em>, in case you&#39;re wondering).</p><p>Here&#39;s a little code snippet to get you on your way:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;svg</span> <span class="cm-attribute">viewBox</span>=<span class="cm-string">"-200 -200 400 400"</span><span class="cm-tag">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!-- your balls here! --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;/svg&gt;</span></span></pre></div></div></div></div></div></div></div></pre><p>Now add some circles:</p><ol><li>A circle in the middle (which you will control later on)</li><li>A few smaller &quot;food&quot; circles scattered around the field</li><li>A few bigger circles representing other players</li></ol><p>Here is how you create a basic circle element:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right" style="display: none;"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap  "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 390.453125px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="false"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;circle</span> <span class="cm-attribute">cx</span>=<span class="cm-string">"0"</span> <span class="cm-attribute">cy</span>=<span class="cm-string">"0"</span> <span class="cm-attribute">r</span>=<span class="cm-string">"20"</span> <span class="cm-attribute">fill</span>=<span class="cm-string">lightBlue</span> <span class="cm-tag">/&gt;</span></span></pre></div></div></div></div></div></div></div></pre><p>Take a look at <a href='http://www.december.com/html/spec/colorsvg.html'>this list of named colors</a> if you want to play around with different colors.</p><h3><a name='header-c79' class='md-header-anchor '></a>2.2: Scale the vector graphics</h3><p>As you may have noticed, the viewport does not fit the browser window. If you make your browser smaller, the view gets clipped. To fix that we&#39;ll need to throw some CSS into the mix.</p><p>Create a new <code>css</code> file in the <code>client</code> folder. Using CSS you can scale the <code>&lt;svg&gt;</code> element to fit the browser window.</p><p><em>Mac / Linux:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">touch</span> client/stylesheet.css</span></pre></div></div></div></div></div></div></div></pre><p><em>Windows:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">type nul &gt;&gt; client/stylesheet.css</span></pre></div></div></div></div></div></div></div></pre><p>Inside the <code>css</code> file you should add some rules which apply to the <code>height</code> and <code>width</code> of the <code>&lt;svg&gt;</code> element:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right" style="display: none;"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap     "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 88px; left: 12.4013671875px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="false"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre><span style="padding-right: 0.1px;"><span class="cm-tag">svg</span> {</span></pre><pre><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-comment">/* your rules here */</span></span></pre><pre><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div></div></pre><p>Here&#39;s a tip, take a look at <a href='https://developer.mozilla.org/en/docs/Web/CSS/length#Viewport-percentage_lengths'>relative css lengths</a>.</p><h2><a name='header-c95' class='md-header-anchor '></a>Step 3: Decouple data and UI</h2><p>Okay now you have a feel for how to draw visuals in a browser window. You created some circles and fooled around with the coordinates and radii (strange word, but <em>radiusess</em> isn&#39;t much better).</p><p>Here&#39;s the problem: you hardcoded the circles onto the canvas. The data ( x, y, radius) and the UI (the circle element) are <em>tightly coupled</em>. The amount of <em>food</em> circles and <em>player</em> circles is hardcoded as well. We don&#39;t want that, those values are supposed to be variable and updating those variables is now way too complicated. <strong>It&#39;s time to <em>decouple</em>!</strong></p><p>What data defines a <em>food</em> entity and <em>player</em> entity? The location on the map is definitely something that shouldn&#39;t be hardcoded. Neither should the number of entities on the playing field. The radius of a player is variable as well, as it will depend on the number of food items they have <em>eaten</em>. (don&#39;t worry about your own circle, we&#39;ll tackle that in our next step)</p><p>Removing all that from the <code>&lt;svg&gt;</code> element inside <code>canvas.html</code> gives you something like this:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!-- for each food entity, draw a new circle --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;circle</span> <span class="cm-attribute">cx</span>=<span class="cm-string">'x value of food'</span> <span class="cm-attribute">cy</span>=<span class="cm-string">'y value of player'</span> <span class="cm-attribute">r</span>=<span class="cm-string">5</span> <span class="cm-attribute">fill</span>=<span class="cm-string">black</span> <span class="cm-tag">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">&lt;!-- for each player entity, draw a new circle --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;circle</span> <span class="cm-attribute">cx</span>=<span class="cm-string">'x value of player'</span> <span class="cm-attribute">cy</span>=<span class="cm-string">'y value of player'</span> <span class="cm-attribute">r</span>=<span class="cm-string">'radius of player'</span> <span class="cm-attribute">fill</span>=<span class="cm-string">orange</span> <span class="cm-tag">/&gt;</span></span></pre></div></div></div></div></div></div></div></pre><p>That will obviously not compile. Luckily the real solution is not that much different from what you see above. Here is where we start exploiting the <strong>true power of Meteor</strong>.</p><p>Create an empty JavaScript file.</p><p><em>Mac / Linux:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">touch</span> client/canvas.js</span></pre></div></div></div></div></div></div></div></pre><p><em>Windows:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">type nul &gt;&gt; client/canvas.js</span></pre></div></div></div></div></div></div></div></pre><p>This JavaScript file will contain helper functions and other handy properties that can be used in the <code>canvas.html</code> file. Here is how you add helpers to the <code>&lt;body&gt;</code> element:</p><p><em>JavaScript inside <code>canvas.js</code></em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Template</span>.<span class="cm-property">body</span>.<span class="cm-property">helpers</span>({</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-property">food</span>: [</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-comment">// food entities</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>],</span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-property">otherPlayers</span>: [</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-comment">// player entities</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>]</span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><p>We added 2 empty arrays in the helpers object. Using the example below, you should be able to add the necessary food and player data and render the circles in the browser.</p><p><em>JavaScript</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Template</span>.<span class="cm-property">body</span>.<span class="cm-property">helpers</span>({  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-property">heroes</span>: [</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  {<span class="cm-property">name</span>: <span class="cm-string">"Finn"</span>, <span class="cm-property">sidekick</span>: <span class="cm-string">"Jake"</span>},</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  {<span class="cm-property">name</span>: <span class="cm-string">"Batman"</span>, <span class="cm-property">sidekick</span>: <span class="cm-string">"Robin"</span>}</span></pre><pre class=""><span style="padding-right: 0.1px;">  ]</span></pre><pre class=""><span style="padding-right: 0.1px;">}) </span></pre></div></div></div></div></div></div></div></pre><p><em>HTML</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;body&gt;</span>  </span></pre><pre class=""><span style="padding-right: 0.1px;">  {{#each hero in heroes}}</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tag">&lt;p&gt;</span>{{hero.name}} <span class="cm-error">&amp;</span> {{hero.sidekick}}<span class="cm-tag">&lt;/p&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  {{/each}}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;/body&gt;</span></span></pre></div></div></div></div></div></div></div></pre><p><em>Result</em></p><pre class='md-fences mock-cm' style='display:block;position:relative'>Finn &amp; Jake
Batman &amp; Robin</pre><p>The double curly braces <code>{{</code> and <code>}}</code> are <a href='http://docs.meteor.com/#/full/pkg_spacebars'>Spacebars</a>. They are part of Meteor&#39;s templating system called Blaze. You can use them to iterate over &#39;collections&#39; of data (such as an array, in the example above), access variables, include other HTML snippets (called templates), to control the code flow, etc… Don&#39;t worry too much about them, just remember that whenever you see those there is some &#39;logic&#39; involved.</p><h2><a name='header-c133' class='md-header-anchor '></a>Step 4: Move within the world</h2><p>Remember how you were the center of the universe in step 2.1? That&#39;s exactly where you remain... even if you are moving. &quot;That&#39;s impossible!&quot; you might scream, to which we reply: &quot;No, because <strong>all motion is relative</strong>!&quot;.</p><p><a href='https://www.fourmilab.ch/etexts/einstein/specrel/www/'><img src='http://i.imgur.com/nNwpIvQ.jpg' alt='Einstein' /></a></p><p>Yeah, that&#39;s what Albert said. It might not <em>feel</em> intuitive, but it does simplify the code.</p><p>You moving up is exactly the same as the rest of the world moving down. That&#39;s how we will do things in our code as well. We will <strong>translate all other entities in the opposite direction you are &#39;moving&#39; in</strong> while you remain stationary in the center of the screen. That way we don&#39;t have to worry about your circle moving off screen and don&#39;t have to implement a virtual &#39;camera&#39; that tracks your location.</p><p>First, add some extra helpers in <code>canvas.js</code>:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Template</span>.<span class="cm-property">body</span>.<span class="cm-property">helpers</span>({</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-property">me</span>: {<span class="cm-property">x</span>: <span class="cm-number">10</span>, <span class="cm-property">y</span>: <span class="cm-number">0</span>, <span class="cm-property">radius</span>: <span class="cm-number">10</span>},</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-property">invert</span>(<span class="cm-def">number</span>) {<span class="cm-keyword">return</span> -<span class="cm-variable-2">number</span>},</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">// ...</span></span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><p><code>me</code> is a plain JavaScript object with some data properties, <code>invert</code> is a simple JavaScript function which inverts a given number.</p><hr /><h4><a name='header-c148' class='md-header-anchor '></a>Sidenote</h4><p>If you are using Webstorm and get the following error on the <code>invert</code> function:</p><blockquote><p>Method definition shorthands are not supported by current JavaScript version</p></blockquote><p>You should go to the preferences (on OS X <kbd>⌘</kbd>+<kbd>,</kbd>) and in the top-left corner search for &quot;javascript language version&quot;. Under <code>Languages &amp; Frameworks &gt; JavaScript</code> set the JavaScript version to <em>ECMAScript 6</em> and you are good to go!<img src='http://i.imgur.com/ibfZm1n.png' alt='Screenshot of Webstorm preferences' /></p><hr /><p>Time to decouple your own radius. Do not make use of the <code>me</code>  x and y values, leave them at (0,0).</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;circle</span> <span class="cm-attribute">cx</span>=<span class="cm-string">0</span> <span class="cm-attribute">cy</span>=<span class="cm-string">0</span> <span class="cm-attribute">r</span>=<span class="cm-string">{{me.radius}}</span> <span class="cm-attribute">fill</span>=<span class="cm-string">lightblue</span> <span class="cm-tag">/&gt;</span></span></pre></div></div></div></div></div></div></div></pre><p>Instead, make use of the <code>invert</code> function to move all other entities in the opposite direction of <code>me</code>. To easily apply a translation to all entities they should be grouped. Move the <em>food</em> and <em>player</em> circles inside a <code>&lt;g&gt;</code> element and apply a <code>translate(x y)</code> transformation on the <code>&lt;g&gt;</code> element:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;g</span> <span class="cm-attribute">transform</span>=<span class="cm-string">"translate(x y)"</span> <span class="cm-tag">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">&lt;!-- food and players --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;/g&gt;</span></span></pre></div></div></div></div></div></div></div></pre><p>Make use of the newly created helpers to fill in the correct x and y values. Here is how you can call a helper function with a parameter using the Spacebars syntax:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">{{<span class="cm-keyword">function</span> <span class="cm-variable">parameter</span>}}</span></pre></div></div></div></div></div></div></div></pre><p>If you have done that you are now you are ready to move within the world. Play around with the x and y values of <code>me</code> in <code>canvas.js</code> and save the file. Because of Meteor&#39;s <em>hot code push</em> the browser should automatically refresh and it will look like your circle is moving!</p><h2><a name='header-c168' class='md-header-anchor '></a>Step 5: Synchronize the world</h2><p>You might ask yourself why you did all that work to decouple the data from the UI, only to hardcode the circles in a different place. Well it&#39;s time to get real. So ladies and gents: hold on to your hats, it&#39;s time to... synchronize THE WORLD!</p><p>That sounded rather daunting, didn&#39;t it? Well it shouldn&#39;t. We are working with Meteor, after all. Everything is pretty straightforward.</p><p>Start by creating a new directory called <code>lib</code> inside the <code>agar</code> project:</p><p><em>Mac / Linux / Windows:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">mkdir</span> lib</span></pre></div></div></div></div></div></div></div></pre><p>You should now have 3 folders: a <code>client</code>, <code>server</code> and <code>lib</code> folder. Files in the client are only accessible on the… client, no surprises there. Idem dito for the server. Files in the lib folder are accessible to both client <em>and</em> server.</p><h3><a name='header-c180' class='md-header-anchor '></a>5.1 Sync the food</h3><p>First we need something to store the food entities in. Meteor uses <a href='https://www.mongodb.com'>MongoDB</a> as its database by default. We need to define a <em>collection</em> which is accessible to both server and client. The server will insert (write) the food entities into the database, the client will read from the database. (remember how you iterated over an array in step 3, well you can iterate over a Mongo collection just as easily)</p><p>Create a new JavaScript file called <code>collections.js</code> inside the <code>lib</code> folder.</p><p><em>Mac / Linux:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">touch</span> lib/collections.js</span></pre></div></div></div></div></div></div></div></pre><p><em>Windows:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">type nul &gt;&gt; lib/collections.js</span></pre></div></div></div></div></div></div></div></pre><p>And create a <em>food</em> collection like this:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Food</span> = <span class="cm-keyword">new</span> <span class="cm-variable">Mongo</span>.<span class="cm-property">Collection</span>(<span class="cm-string">'food'</span>)</span></pre></div></div></div></div></div></div></div></pre><p>Food circles should be scattered around the playing field in a randomly fashion. And you need about 200 circles. You don&#39;t want to hardcode those all by hand, now do you?</p><p>Let&#39;s create a function inside the same <code>collections.js</code> file which returns a random coordinate:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">randomLocation</span> = <span class="cm-keyword">function</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">return</span> {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">x</span>: <span class="cm-string">'random value'</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">y</span>: <span class="cm-string">'random value'</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>}</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div></div></pre><p>Take a look at <a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random'>MDN</a> to figure out how to return random numbers:</p><blockquote><p>The Math.random() function returns a floating-point, pseudo-random number in the range [0, 1) that is, from 0 (inclusive) up to, but not including, 1 (exclusive), which you can scale to your desired range. </p></blockquote><p>Make sure your <code>randomLocation</code> function will generate random x and y values between -500 and 499, not 0 and 0.999.</p><p>Time to put your shiny new method to the test. Let&#39;s create a <strong>food generator</strong>!</p><p><img src='http://i.imgur.com/KL7c3eS.jpg' alt='Star Trek animated series - malfunctioning food replicator' /></p><p>Create a new <code>foodGenerator.js</code> file inside the <code>server</code> folder:</p><p><em>Mac / Linux:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">touch</span> server/foodGenerator.js</span></pre></div></div></div></div></div></div></div></pre><p><em>Windows:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">type nul &gt;&gt; server/foodGenerator.js</span></pre></div></div></div></div></div></div></div></pre><p>And create a for-loop to populate the food collection with 200 random coordinates:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> (<span class="cm-keyword">let</span> <span class="cm-variable">foodCount</span> = <span class="cm-number">0</span>; <span class="cm-variable">foodCount</span> &lt; <span class="cm-number">200</span>; <span class="cm-variable">foodCount</span>++) {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable">Food</span>.<span class="cm-property">insert</span>(<span class="cm-variable">randomLocation</span>())</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div></div></pre><p>For those of you who have never seen a construction like that before, let me break it down for you. It creates a new variable called <code>foodCount</code>. As long as <code>foodCount</code> is strictly smaller than 200 it will run the <code>Food.insert()</code> function and increment the counter by 1.</p><p>Somewhere in your helpers in the <code>canvas.js</code> file you should have this:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Template</span>.<span class="cm-property">body</span>.<span class="cm-property">helpers</span>({</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-property">food</span>: [</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>{<span class="cm-property">x</span>: -<span class="cm-number">100</span>, <span class="cm-property">y</span>:-<span class="cm-number">30</span>},</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>{<span class="cm-property">x</span>: <span class="cm-number">30</span>, <span class="cm-property">y</span>: <span class="cm-number">130</span>},</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>{<span class="cm-property">x</span>: <span class="cm-number">87</span>, <span class="cm-property">y</span>: <span class="cm-number">100</span>}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>],</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">// ...</span></span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><p><code>food</code> is in this case a plain JavaScript array. You use it in your UI to iterate over the contents using the Spacebars <code>{{#each }}</code> syntax. All you need to do is change <code>food</code> from being an array to be a function, which returns something <em>like</em> an array. Remember: the <code>Food</code> collection is defined in the <code>lib</code> folder, i.e. you can access it from the client:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Template</span>.<span class="cm-property">body</span>.<span class="cm-property">helpers</span>({</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-property">food</span>() {<span class="cm-keyword">return</span> <span class="cm-variable">Food</span>.<span class="cm-property">find</span>()},</span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">// ...</span></span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><p><code>Food.find()</code> (without any parameters) will return a <a href='https://docs.mongodb.org/manual/reference/glossary/#term-cursor'>cursor</a> pointing to <em>all</em> <code>food</code> entities:</p><blockquote><p>A pointer to the result set of a query. Clients can iterate through a cursor to retrieve results.</p></blockquote><p>That&#39;s all we need! Save your file and look at all the glorious food balls appearing in your browser!</p><p>But there&#39;s a problem, everytime the server restarts (e.g. when you save a file) 200 food circles are added to the field. Try adjusting the for-loop on the server so there are at most 200 circles on-screen at once. </p><p>Hint: you can call the <code>count()</code> method on a <em>cursor</em>:</p><blockquote><p>Append the count() method to a find() query to return the number of matching documents.</p></blockquote><h3><a name='header-c243' class='md-header-anchor '></a>5.2 Sync the players</h3><p>Well, that wasn&#39;t that hard now was it? Time to do the same for all the <em>player</em> entities.</p><p>Create a new collection called <code>Players</code> in the <code>collections.js</code> file in the <code>lib</code> folder.</p><p>In the <code>server</code> folder create a new file called <code>playerBinding.js</code>. This does exactly what it sounds like:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// When a person opens the browser game</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Meteor</span>.<span class="cm-property">onConnection</span>(<span class="cm-keyword">function</span>(<span class="cm-def">connection</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-comment">// 1. create a new player object</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">const</span> <span class="cm-def">newPlayer</span> = <span class="cm-variable">randomLocation</span>()</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable-2">newPlayer</span>.<span class="cm-property">points</span> = <span class="cm-number">0</span>;</span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-comment">// 2. add player object to database</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">const</span> <span class="cm-def">playerId</span> = <span class="cm-variable">Players</span>.<span class="cm-property">insert</span>(<span class="cm-variable-2">newPlayer</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  </span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// 3. link the unique ID to the current connection </span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable-2">connection</span>.<span class="cm-property">playerId</span> = <span class="cm-variable-2">playerId</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// When a person closes the browser game</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable-2">connection</span>.<span class="cm-property">onClose</span>(<span class="cm-keyword">function</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-comment">// remove the player from the database (using the unique ID)</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-variable">Players</span>.<span class="cm-property">remove</span>(<span class="cm-variable-2">playerId</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>})</span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// this method returns the ID of the current connected user</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Meteor</span>.<span class="cm-property">methods</span>({</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-property">getMyPlayerId</span>() { <span class="cm-keyword">return</span> <span class="cm-keyword">this</span>.<span class="cm-property">connection</span>.<span class="cm-property">playerId</span> }</span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// empties the Players collection </span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Players</span>.<span class="cm-property">remove</span>({})</span></pre></div></div></div></div></div></div></div></pre><p>That&#39;s all you need to handle players connecting and disconnecting to the game.</p><p>We need to add a package to our project in preperation for the next bit. Open your Terminal app or Command prompt, navigate to your project folder and run:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">meteor add reactive-var </span></pre></div></div></div></div></div></div></div></pre><p>A reactive variable is a special kind of variable. If it changes, all the places where you used that variable are also reactively updated. Automagically! (what a horrible word)</p><p>In the <code>client</code> folder create a new file called <code>player.js</code></p><p>Mac / Linux:*</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-builtin">touch</span> client/player.js</span></pre></div></div></div></div></div></div></div></pre><p><em>Windows:</em></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;">type nul &gt;&gt; client/player.js</span></pre></div></div></div></div></div></div></div></pre><p></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// make the myPlayerId variable importable in other files</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">export</span> <span class="cm-keyword">const</span> <span class="cm-variable">myPlayerId</span> = <span class="cm-keyword">new</span> <span class="cm-variable">ReactiveVar</span>()</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// if a player is connected, fetch his/her ID and put it in the reactive var</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Tracker</span>.<span class="cm-property">autorun</span>(<span class="cm-keyword">function</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">Meteor</span>.<span class="cm-property">status</span>().<span class="cm-property">connected</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">Meteor</span>.<span class="cm-property">call</span>(</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-string">'getMyPlayerId'</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span>(<span class="cm-def">error</span>, <span class="cm-def">result</span>) =&gt; <span class="cm-variable">myPlayerId</span>.<span class="cm-property">set</span>(<span class="cm-variable-2">result</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>)</span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><p>From the <a href='http://docs.meteor.com/#/full/tracker'>Meteor documentation</a>:</p><blockquote><p>Tracker.autorun allows you to run a function that depends on reactive data sources, in such a way that, if there are changes to the data later, the function will be rerun.</p></blockquote><p>Add this at the top of the <code>canvas.js</code> file in the <code>client</code> folder:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> { <span class="cm-variable">myPlayerId</span> } <span class="cm-keyword">from</span> <span class="cm-string">'./player'</span></span></pre></div></div></div></div></div></div></div></pre><p>Now we can access the <code>playerId</code> of the current player inside throughout the canvas file.</p><p>Update your <code>me</code> and <code>otherPlayers</code> helpers so they make use of the Players collection and add a new helper function called <code>radiusFor</code>:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Template</span>.<span class="cm-property">body</span>.<span class="cm-property">helpers</span>({</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-property">me</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">return</span> <span class="cm-variable">Players</span>.<span class="cm-property">findOne</span>(<span class="cm-variable">myPlayerId</span>.<span class="cm-property">get</span>())</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>},</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-property">otherPlayers</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp;  <span class="cm-tab">  </span><span class="cm-comment">// returns the entire collection except for the current player</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">return</span> <span class="cm-variable">Players</span>.<span class="cm-property">find</span>({<span class="cm-property">_id</span>: {<span class="cm-property">$not</span>: <span class="cm-variable">myPlayerId</span>.<span class="cm-property">get</span>()} })</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>},</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-property">radiusFor</span>(<span class="cm-def">player</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">return</span> <span class="cm-number">10</span> + <span class="cm-variable-2">player</span>.<span class="cm-property">points</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>},</span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">// ...</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><p>Update your UI in <code>canvas.html</code> to make use of the new helpers:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;">{{#each player in otherPlayers}}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tag">&lt;circle</span> <span class="cm-attribute">cx</span>=<span class="cm-string">{{player.x}}</span> <span class="cm-attribute">cy</span>=<span class="cm-string">{{player.y}}</span> <span class="cm-attribute">r</span>=<span class="cm-string">{{</span> <span class="cm-attribute">???</span> <span class="cm-attribute">}}</span> <span class="cm-attribute">fill</span>=<span class="cm-string">orange</span> <span class="cm-tag">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">{{/each}}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;">{{#if me}}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tag">&lt;circle</span> <span class="cm-attribute">cx</span>=<span class="cm-string">0</span> <span class="cm-attribute">cy</span>=<span class="cm-string">0</span> <span class="cm-attribute">r</span>=<span class="cm-string">{{</span> <span class="cm-attribute">???</span> <span class="cm-attribute">}}</span> <span class="cm-attribute">fill</span>=<span class="cm-string">lightblue</span> <span class="cm-tag">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">{{/if}}</span></pre></div></div></div></div></div></div></div></pre><p>You need to call the <code>radiusFor</code> helper and give it a <code>player</code> object as parameter.</p><p><strong>Done!</strong></p><p>Ask your neighbor to &#39;surf&#39; to your (internal) IP address followed by the port number like so:</p><pre class='md-fences mock-cm' style='display:block;position:relative'>http://192.168.0.191:3000</pre><p>He or she should be able to connect to your game! They can&#39;t move yet, so let&#39;s implement movement next in step 6.</p><p><em>Note: your neighbor must be on the same network as you for this to work</em></p><h2><a name='header-c296' class='md-header-anchor '></a>Step 6: Move the player</h2><p>It&#39;s time to take control! We will use the coordinate of the mouse pointer to determine the direction a player wants to move in and we will update the player coordinate by continously calling a method that updates our x and y values according to the direction.</p><h3><a name='header-c299' class='md-header-anchor '></a>6.1 Add mouse controls</h3><p>Inside the <code>player.js</code> file add the following code:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right" style="display: none;"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap  "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 154px; left: 20.796875px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="false"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// ...</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// Movement</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-keyword">export</span> <span class="cm-keyword">var</span> <span class="cm-variable">direction</span> = {<span class="cm-property">x</span>: <span class="cm-number">0</span>, <span class="cm-property">y</span>: <span class="cm-number">0</span>, <span class="cm-property">normalize</span>() {</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">const</span> <span class="cm-def">length</span> = <span class="cm-variable">Math</span>.<span class="cm-property">hypot</span>(<span class="cm-keyword">this</span>.<span class="cm-property">x</span>, <span class="cm-keyword">this</span>.<span class="cm-property">y</span>)</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">this</span>.<span class="cm-property">x</span> /= <span class="cm-variable-2">length</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">this</span>.<span class="cm-property">y</span> /= <span class="cm-variable-2">length</span></span></pre><pre><span style="padding-right: 0.1px;">}}</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-keyword">var</span> <span class="cm-variable">myVelocity</span> = <span class="cm-number">3</span></span></pre></div></div></div></div></div></div></div></pre><p>The <code>direction</code> variable represents a <em>vector</em> of the direction the user is moving to. A vector is defined by its length (or magnitude) and direction. We are only interested in its direction, so each time the x and y properties are changed the vector should be normalized. A normalized vector is nothing more than a vector with a length of 1.</p><p>Don&#39;t worry about setting the x and y values of the direction, we&#39;ll do that somewhere else.</p><p>Now we need to make sure the player coordinate in the <code>Players</code> collection gets continously incremented (note the <code>$inc</code>, that&#39;s Mongo syntax to increment a value) to make the player move. Add this snippet and fill in the blanks. Make use of the <code>direction</code> and <code>velocity</code> variables.</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right" style="display: none;"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap    "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 491.265625px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-code " style=""><pre><span style="padding-right: 0.1px;"><span class="cm-variable">window</span>.<span class="cm-property">requestAnimationFrame</span>(<span class="cm-keyword">function</span> <span class="cm-variable">updateMyPosition</span>() {</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable">Players</span>.<span class="cm-property">update</span>(<span class="cm-variable">myPlayerId</span>.<span class="cm-property">get</span>(), {<span class="cm-property">$inc</span>: {</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">x</span>: ???,</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">y</span>: ???</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>}})</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable">window</span>.<span class="cm-property">requestAnimationFrame</span>(<span class="cm-variable">updateMyPosition</span>)</span></pre><pre><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><p>The <code>window.requestAnimationFrame()</code> is pretty important. It makes our game &#39;run&#39;. From <a href='https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame'>MDN</a>:</p><blockquote><p>The Window.requestAnimationFrame() method tells the browser that you wish to perform an animation and requests that the browser call a specified function to update an animation before the next repaint.</p></blockquote><p>Inside that function we call the same function again. That&#39;s called recursion. We create an <em>infinite loop</em> on purpose. This is the so called <em><a href='https://developer.mozilla.org/en-US/docs/Games/Anatomy'>game loop</a></em>:</p><blockquote><p>The goal of every video game is to present the user(s) with a situation, accept their input, interpret those signals into actions, and calculate a new situation resulting from those acts. Games are constantly looping through these stages, over and over, until some end condition occurs (such as winning, losing, or exiting to go to bed). Not surprisingly, this pattern corresponds to how a game engine is programmed.</p></blockquote><p>The x and y values of the direction vector need to be correctly calculated for that loop to work of course. So <code>import</code> the direction object in the <code>canvas.js</code> file and add an event listener to the <code>&lt;body&gt;</code> element like so:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right" style="display: none;"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap   "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 264px; left: 20.796875px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="false"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> { <span class="cm-variable">myPlayerId</span>, <span class="cm-variable">direction</span> } <span class="cm-keyword">from</span> <span class="cm-string">'./player'</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Template</span>.<span class="cm-property">body</span>.<span class="cm-property">helpers</span>({</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-comment">//...</span></span></pre><pre class=""><span style="padding-right: 0.1px;">}}</span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Template</span>.<span class="cm-variable">body</span>.<span class="cm-variable">events</span>({</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-string">'mousemove svg'</span>(<span class="cm-variable">mouse</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">direction</span>.<span class="cm-property">x</span> = <span class="cm-variable">mouse</span>.<span class="cm-property">clientX</span> - <span class="cm-variable">mouse</span>.<span class="cm-property">currentTarget</span>.<span class="cm-property">offsetWidth</span> /<span class="cm-number">2</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">direction</span>.<span class="cm-property">y</span> = <span class="cm-variable">mouse</span>.<span class="cm-property">clientY</span> - <span class="cm-variable">mouse</span>.<span class="cm-property">currentTarget</span>.<span class="cm-property">offsetHeight</span>/<span class="cm-number">2</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">direction</span>.<span class="cm-property">normalize</span>()</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>}</span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><p>Just like you added helpers to the <code>&lt;body&gt;</code> template, you can add event listeners and, well… &#39;listen&#39; for events. This enables you to do extra stuff every time the event occurs, stuff like updating the direction vector. Neat!</p><p>From <a href='https://developer.mozilla.org/en-US/docs/Web/Events/mousemove'>MDN</a>:</p><blockquote><p>The mousemove event is fired when a pointing device (usually a mouse) is moved while over an element.</p></blockquote><p>So each time the mouse moves over the <code>&lt;svg&gt;</code> element you update the direction vector. The direction starts from the center of the screen and points to where the cursor is located. </p><p>The <code>clientX</code> and <code>clientY</code> properties represent the x and y values of the mouse in the local DOM element, in other words: the coordinate inside the <code>&lt;svg&gt;</code> element.</p><p><code>mouse.currentTarget</code> is in our case the <code>&lt;svg&gt;</code> element, <code>offsetWidth</code> and <code>offsetHeight</code> is the current width and height of the element and we need those to calculate the center of the screen.</p><p>Save the file and check your browser: <strong>you are skating accross the field</strong>! Feel free to play around with your velocity. This is starting to look like a real game.</p><h3><a name='header-c338' class='md-header-anchor '></a>6.2 Limit players within bounds</h3><p>Right now the player is able to move way too far from the playing field. We need to set some boundaries.</p><p>Let&#39;s create a grid to better visualize the playing field. Inside <code>canvas.html</code> add to the <code>&lt;svg&gt;</code> element:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right" style="display: none;"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap  "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 66px; left: 155px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;g</span> <span class="cm-attribute">transform</span>=<span class="cm-string">"translate({{invert me.x}} {{invert me.y}})"</span><span class="cm-tag">&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tag">&lt;pattern</span> <span class="cm-attribute">id</span>=<span class="cm-string">grid20</span> <span class="cm-attribute">width</span>=<span class="cm-string">20</span> <span class="cm-attribute">height</span>=<span class="cm-string">20</span> <span class="cm-attribute">patternUnits</span>=<span class="cm-string">userSpaceOnUse</span><span class="cm-tag">&gt;</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tag">&lt;path</span> <span class="cm-attribute">d</span>=<span class="cm-string">"M 20 0 L 0 0 0 20"</span> <span class="cm-attribute">fill</span>=<span class="cm-string">none</span> <span class="cm-attribute">stroke</span>=<span class="cm-string">gray</span> <span class="cm-attribute">stroke-opacity</span>=<span class="cm-string">0.2</span> <span class="cm-attribute">stroke-width</span>=<span class="cm-string">2</span> <span class="cm-tag">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tag">&lt;/pattern&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tag">&lt;rect</span> <span class="cm-attribute">height</span>=<span class="cm-string">1001</span> <span class="cm-attribute">width</span>=<span class="cm-string">1001</span> <span class="cm-attribute">y</span>=<span class="cm-string">-500</span> <span class="cm-attribute">x</span>=<span class="cm-string">-500</span> <span class="cm-attribute">fill</span>=<span class="cm-string">url(#grid20)</span> <span class="cm-tag">/&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span></span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">&lt;!-- food and players --&gt;</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tag">&lt;/g&gt;</span></span></pre></div></div></div></div></div></div></div></pre><p>The <code>&lt;path&gt;</code> element has a &#39;draw&#39; attribute called <code>d</code> which describes that path. From <a href='https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d'>MDN</a>:</p><blockquote><p>The d attribute is actually a string which contains a series of path descriptions. These paths consist of combinations the following instructions:</p><p>Moveto
Lineto</p><p>[…]</p><p><strong>Moveto</strong> instructions can be thought of as picking up the drawing instrument and setting it down somewhere else. Unlike Moveto instructions, <strong>Lineto</strong> instructions will draw a straight line. This line moves from the current position to the specified location.</p></blockquote><p></p><p>Save the file and look at your browser, you should see something like this:</p><p><img src='http://i.imgur.com/PsuC5Ai.png' alt='Screenshot of playing field with grid' /></p><p>Okay let&#39;s make sure the player can&#39;t move off the grid. Inside the <code>player.js</code> file add a new variable called <code>myPosition</code>:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code"><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">myPosition</span> = {<span class="cm-property">x</span>: <span class="cm-number">0</span>, <span class="cm-property">y</span>: <span class="cm-number">0</span>}</span></pre></div></div></div></div></div></div></div></pre><p>Now we need to keep this variable up to date each time the position changes. A perfect task for the Tracker. Add this in the same  <code>player.js</code> file:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Tracker</span>.<span class="cm-property">autorun</span>(<span class="cm-keyword">function</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">const</span> <span class="cm-def">me</span> = <span class="cm-variable">Players</span>.<span class="cm-property">findOne</span>(<span class="cm-variable">myPlayerId</span>.<span class="cm-property">get</span>())</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">if</span> (<span class="cm-variable-2">me</span> != <span class="cm-atom">undefined</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">myPosition</span>.<span class="cm-property">x</span> = <span class="cm-variable-2">me</span>.<span class="cm-property">x</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">myPosition</span>.<span class="cm-property">y</span> = <span class="cm-variable-2">me</span>.<span class="cm-property">y</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>}</span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><p>Each time the player position changes, Meteor runs that function and, as a result, the <code>myPostion</code> variable gets updated. We need the position to determine whether the player is moving out of bounds. So update the <code>updateMyPosition()</code> function:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">window</span>.<span class="cm-property">requestAnimationFrame</span>(<span class="cm-keyword">function</span> <span class="cm-variable">updateMyPosition</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable">Players</span>.<span class="cm-property">update</span>(<span class="cm-variable">myPlayerId</span>.<span class="cm-property">get</span>(), {<span class="cm-property">$inc</span>: {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">x</span>: <span class="cm-variable">clamp</span>(<span class="cm-variable">direction</span>.<span class="cm-property">x</span>, <span class="cm-variable">myPosition</span>.<span class="cm-property">x</span>) * <span class="cm-variable">myVelocity</span>,</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">y</span>: <span class="cm-variable">clamp</span>(<span class="cm-variable">direction</span>.<span class="cm-property">y</span>, <span class="cm-variable">myPosition</span>.<span class="cm-property">y</span>) * <span class="cm-variable">myVelocity</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>}})</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable">window</span>.<span class="cm-property">requestAnimationFrame</span>(<span class="cm-variable">updateMyPosition</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><p>As you can see it now makes use of a function called <code>clamp(direction, position)</code> that takes 2 numbers as parameter. It&#39;s your turn to create that function!</p><p>There are 3 possible scenarios to consider:</p><ol><li>You are inside the bounds: you can continue moving in either direction.</li><li>You just crossed the bounds and are moving <em>away</em> from the playing field: your circle should stop moving.</li><li>You just crossed the bounds but changed direction and are now moving <em>towards</em> the playing field: your circle should continue moving (towards the playing field).</li></ol><p>The <code>clamp</code> function should return a number. E.g. in scenario 2 the function should return 0 because <code>0 * myVelocity</code>  means your circle stops moving. In scenario 1 and 3 you can simply return the <code>direction</code> parameter, because the player may continue in that direction.</p><p>Hint: these <code>Math</code> functions may come in handy:</p><p><code>Math.abs(number)</code> :</p><blockquote><p>The Math.abs() function returns the absolute value of a number</p></blockquote><p><a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/abs'>Documentation</a></p><p><code>Math.sign(number)</code> :</p><blockquote><p>The Math.sign() function returns the sign of a number, indicating whether the number is positive, negative or zero.</p></blockquote><p><a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign'>Documentation</a></p><h2><a name='header-c403' class='md-header-anchor '></a>Step 7: Eating behavior</h2><h4><a name='header-c404' class='md-header-anchor '></a><a href='https://youtu.be/-8wgXRNYcPM?t=23s'>Didn&#39;t your mother tell you not to play with your food?!</a></h4><p><img src='http://i.imgur.com/K8NvthG.jpg' alt='Scar playing with his food' /></p><p></p><p>Well in our case, we definitely should. So follow along!</p><h3><a name='header-c411' class='md-header-anchor '></a>7.1 Food</h3><p>Here is what needs to happen:</p><ol><li><p>Find food circles which are close to you</p></li><li><p>Check if any of those food circles overlap with your circle</p></li><li><p>If we detect an overlap:</p><ol><li>Remove the food circle from the Food collection</li><li>Insert a new food circle at a random location in the Food collection</li><li>Update your score / points in the Players collection</li><li>Lower your velocity (fatter = slower)</li></ol></li></ol><p>Add a new function called <code>eatWhenPossible</code> which takes a <code>player</code> as paramater inside <code>player.js</code></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right" style="display: none;"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap                "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 330px; left: 348.453125px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="false"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// ...</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span>​</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">// Eating behavior</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-variable">eatWhenPossible</span>(<span class="cm-def">player</span>) {</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">const</span> <span class="cm-def">radius</span> = <span class="cm-variable-2">player</span>.<span class="cm-property">points</span>+<span class="cm-number">10</span></span></pre><pre><span style="padding-right: 0.1px;"> &nbsp;  </span></pre><pre><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// 1.</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable">Food</span>.<span class="cm-property">find</span>({</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">x</span>: {<span class="cm-property">$gte</span>: ??? , <span class="cm-variable">$lte</span>: ??? },</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">y</span>: {<span class="cm-property">$gte</span>: ??? , <span class="cm-variable">$lte</span>: ??? }</span></pre><pre><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// 2.</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>}).<span class="cm-property">forEach</span>(<span class="cm-keyword">function</span>(<span class="cm-def">pieceOfFood</span>) {</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">if</span> ( ??? ) {</span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;  <span class="cm-tab">  </span><span class="cm-comment">// 3. </span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">Food</span>.<span class="cm-variable">remove</span>(<span class="cm-variable-2">pieceOfFood</span>.<span class="cm-variable">_id</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">Food</span>.<span class="cm-property">insert</span>(<span class="cm-variable">randomLocation</span>())</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">Players</span>.<span class="cm-property">update</span>(<span class="cm-variable-2">player</span>.<span class="cm-property">_id</span>, {<span class="cm-property">$inc</span>: {<span class="cm-property">points</span>: <span class="cm-number">1</span>}})</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">myVelocity</span> *= <span class="cm-number">0.95</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>}</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>})</span></pre><pre class=""><span style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div></div></pre><p>It is up to you to fill in the blanks.</p><p>The <code>$gte</code> Mongo syntax means <em>greater than or equal</em>, <code>$lte</code> means, not surprisingly, <em>less than or equal</em>. Makes sense, right?</p><p>To check if 2 circles overlap, we need to know their distance and both their radii. The radius is readily available. We do need to <em>calculate</em> their distance though. Take a look at this, it should immediately make you think of something:</p><p><img src='http://i.imgur.com/Ihrrex5.png' alt='Overlap hint' /></p><p>The Pythagorean theorem! Yes, you are correct. Take a look at <a href='https://en.wikipedia.org/wiki/Pythagorean_theorem'>Wikipedia</a> if you need a reminder. Hint: take a look at the <code>Math.hypot()</code> function:</p><blockquote><p>The Math.hypot() function returns the square root of the sum of squares of its arguments</p></blockquote><p>From: <a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/hypot'>MDN</a></p><p>The <code>eatWhenPossible</code> method should be called each time the player moves. So call it inside the autorun method:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right" style="display: none;"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap    "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 88px; left: 230.8447265625px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="false"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Tracker</span>.<span class="cm-property">autorun</span>(<span class="cm-keyword">function</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">const</span> <span class="cm-def">me</span> = <span class="cm-variable">Players</span>.<span class="cm-property">findOne</span>(<span class="cm-variable">myPlayerId</span>.<span class="cm-property">get</span>())</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-keyword">if</span> (<span class="cm-variable-2">me</span> != <span class="cm-atom">undefined</span>) {</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">myPosition</span>.<span class="cm-property">x</span> = <span class="cm-variable-2">me</span>.<span class="cm-property">x</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">myPosition</span>.<span class="cm-property">y</span> = <span class="cm-variable-2">me</span>.<span class="cm-property">y</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">eatWhenPossible</span>(<span class="cm-variable-2">me</span>)</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>}</span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><h3><a name='header-c449' class='md-header-anchor '></a>7.2 Players</h3><p>We need a new property on player entities, so in the file <code>playerBinding.js</code> inside the <code>server</code> folder, add a <code>gameOver</code> property and set it to <code>false</code> like so:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right" style="display: none;"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 88px; left: 37.59375px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Meteor</span>.<span class="cm-property">onConnection</span>(<span class="cm-keyword">function</span>(<span class="cm-def">connection</span>) {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-comment">// ...</span></span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-tab">  </span><span class="cm-variable">newPlayer</span>.<span class="cm-property">gameOver</span> = <span class="cm-atom">false</span></span></pre><pre class=""><span style="padding-right: 0.1px;"> &nbsp;  </span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-comment">// ...</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>})</span></pre></div></div></div></div></div></div></div></pre><p>We only want to show the circles of player who&#39;s game is <em>not</em> over, so update the <code>otherPlayers</code> helper inside the <code>canvas.js</code> file:</p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code" style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">Template</span>.<span class="cm-property">body</span>.<span class="cm-property">helpers</span>({</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-property">otherPlayers</span>() {</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">return</span> <span class="cm-variable">Players</span>.<span class="cm-property">find</span>({</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">_id</span>: {<span class="cm-property">$not</span>: <span class="cm-variable">myPlayerId</span>.<span class="cm-property">get</span>()},</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">gameOver</span>: <span class="cm-atom">false</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>})</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>},</span></pre><pre class=""><span style="padding-right: 0.1px;">  </span></pre><pre class=""><span style="padding-right: 0.1px;">  <span class="cm-comment">// ...</span></span></pre><pre class=""><span style="padding-right: 0.1px;">})</span></pre></div></div></div></div></div></div></div></pre><p>Lastly, add the logic to detect a collision with other players in the <code>eatWhenPossible(player)</code> method inside the <code>player.js</code> file.</p><p>Here is what needs to happen:</p><ol><li><p>Find player circles in the Players collection which are close to you, and</p><ol><li>Are not <em>you</em>,</li><li>Are smaller than you,</li><li>Whose game isn&#39;t over.</li></ol></li><li><p>Check if any of those other player circles overlap with our circle</p></li><li><p>If we detect an overlap:</p><ol><li>Set <code>gameOver</code> property of other player to <code>true</code></li><li>Update your score / points in the Players collection</li><li>Lower our velocity (fatter = slower)</li></ol></li></ol><p></p><pre class="md-fences"><div class="code-tooltip md-tooltip-hide" align="right" style="display: none;"></div> <div class="CodeMirror cm-s-inner CodeMirror-wrap              "><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 286px; left: 256.046875px;"></div><div class="CodeMirror-hscrollbar" style="left: 0px; min-height: 18px;"></div><div class="CodeMirror-vscrollbar" style="min-width: 18px;"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-height: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-code   " style=""><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">//Eat other players</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-comment">// 1.</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-variable">Players</span>.<span class="cm-property">find</span>({</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">_id</span>: {<span class="cm-property">$ne</span>: <span class="cm-variable">player</span>.<span class="cm-property">_id</span>},</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">points</span>: {<span class="cm-property">$lt</span>: <span class="cm-variable">player</span>.<span class="cm-property">points</span>},</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">x</span>: {<span class="cm-property">$gte</span>: ??? , <span class="cm-variable">$lte</span>: ??? },</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">y</span>: {<span class="cm-property">$gte</span>: ??? , <span class="cm-variable">$lte</span>: ??? },</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-property">gameOver</span>: {<span class="cm-property">$ne</span>: <span class="cm-atom">true</span>}</span></pre><pre><span style="padding-right: 0.1px;"> &nbsp;  <span class="cm-comment">// 2.</span></span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span>}).<span class="cm-property">forEach</span>(<span class="cm-keyword">function</span>(<span class="cm-def">otherPlayer</span>) {</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-keyword">if</span> ( ??? ) {</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">Players</span>.<span class="cm-variable">update</span>(<span class="cm-variable-2">otherPlayer</span>.<span class="cm-variable">_id</span>, {<span class="cm-variable">$set</span>: {<span class="cm-variable">gameOver</span>: <span class="cm-atom">true</span>}})</span></pre><pre><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">Players</span>.<span class="cm-property">update</span>(<span class="cm-variable">player</span>.<span class="cm-property">_id</span>, {<span class="cm-property">$inc</span>: {<span class="cm-property">points</span>: <span class="cm-variable-2">otherPlayer</span>.<span class="cm-property">points</span>+<span class="cm-number">1</span>}})</span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-tab">    </span><span class="cm-variable">myVelocity</span> *= <span class="cm-number">0.95</span></span></pre><pre class=""><span style="padding-right: 0.1px;"><span class="cm-tab">    </span><span class="cm-tab">    </span>}</span></pre></div></div></div></div></div></div></div></pre><p>Again, fill in the blanks.</p><p>Once you are done, save the file and open your browser! <strong>Tadaa</strong>. Congratulations, you have built a basic prototype of a multiplayer browser game in about 2 hours. Isn&#39;t that neat?</p><h1><a name='header-c627' class='md-header-anchor '></a>Step 8: Where to take it from here?</h1><p>There are still lots of features that can be added, some easier than others. With the knowlegde you now have you should be able to very easily implement random colors. Up till now you used named colors, but SVG elements can use RGB colors as well of course.</p><p>Because we&#39;re working with SVG, adding skins should not be that hard either.</p></div>
</body>
</html>